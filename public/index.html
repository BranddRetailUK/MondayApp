<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ultimate Hub</title>
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
  <script src="customers.js" defer></script>
  <script src="orders.js" defer></script>
</head>
<body>
  <div class="app-container">
    <nav class="sidebar">
      <h2 class="sidebar-logo">Ultimate Hub</h2>
      <ul class="nav-tabs">
        <li data-tab="home" class="active">Home</li>
        <li data-tab="orders">Orders</li>
        <li data-tab="customers">Customers</li>
        <li data-tab="stock">Stock</li>
        <li data-tab="labels">Labels</li>
        <li data-tab="shipping">Shipping</li>
      </ul>
    </nav>

    <main class="main-content">
      <div id="tab-home" class="tab-content active">
        <h1>Home</h1>
        <p>Welcome to the dashboard.</p>
      </div>

      <!-- ORDERS -->
      <div id="tab-orders" class="tab-content">
        <h1>Orders</h1>

        <div id="orders-root" class="grid-2">
          <!-- Left: Orders list -->
          <section class="card">
            <div class="card-head">
              <h2>Recent Orders</h2>
            </div>
            <div class="card-body">
              <table id="orders-table" class="data-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Customer</th>
                    <th>Code</th>
                    <th>Product</th>
                    <th>Colour/Size</th>
                    <th>Created</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>

          <!-- Right: Create Order form -->
          <section class="card">
            <div class="card-head">
              <h2>Create Order</h2>
            </div>
            <div class="card-body">
              <form id="order-form" class="form-grid">
                <div class="form-row full">
                  <label>Customer <span class="req">*</span></label>
                  <div class="combo">
                    <input id="order-customer" placeholder="Search customer…" autocomplete="off" />
                    <button type="button" class="btn" id="add-customer-btn">Add Customer</button>
                    <div id="order-customer-dd" class="dd"></div>
                  </div>
                  <div class="small muted">Start typing to search your customers, then click to select.</div>
                </div>

                <!-- Products (multi-line) -->
                <div class="form-row full"><h3 class="subhead">Products</h3></div>

                <div id="order-lines">
                  <!-- Line row template (hidden, cloned by JS) -->
                  <div class="line-row line-template" style="display:none">
                    <div class="line-grid">
                      <div>
                        <label>Product Code
                          <input name="product_code" placeholder="e.g., RX401-FBK" />
                        </label>
                      </div>
                      <div>
                        <label>Garment Type
                          <input name="garment_type" placeholder="T-Shirt, Hoodie, etc." />
                        </label>
                      </div>
                      <div class="full">
                        <label>Product Title
                          <input name="product_title" placeholder="e.g., Heavyweight Oversized Tee" />
                        </label>
                      </div>
                      <div>
                        <label>Colour
                          <input name="colour" placeholder="e.g., Black" />
                        </label>
                      </div>
                      <div>
                        <label>Size
                          <input name="size" placeholder="e.g., XL" />
                        </label>
                      </div>
                      <div class="qty">
                        <label>Qty
                          <input name="quantity" type="number" min="1" value="1" />
                        </label>
                      </div>
                    </div>
                  </div>

                  <!-- Lines will be inserted here by JS -->
                  <div id="order-lines-body"></div>

                  <div class="form-row full">
                    <button type="button" id="add-line-btn" class="btn outline">+ Add line</button>
                  </div>
                </div>

                <div class="form-row">
                  <label>Status
                    <select name="status">
                      <option value="Draft">Draft</option>
                      <option value="Confirmed">Confirmed</option>
                      <option value="In Production">In Production</option>
                      <option value="Completed">Completed</option>
                      <option value="Shipped">Shipped</option>
                    </select>
                  </label>
                </div>

                <div class="form-row full">
                  <label>Notes
                    <input name="notes" placeholder="Any special instructions…" />
                  </label>
                </div>

                <div class="form-row full">
                  <label>Upload Artwork / Visuals (multiple allowed)
                    <input type="file" name="files" id="files" multiple />
                  </label>
                </div>

                <div class="form-row full">
                  <button class="btn primary" type="submit">Create Order</button>
                </div>
              </form>
            </div>
          </section>
        </div>
      </div>

      <!-- CUSTOMERS -->
      <div id="tab-customers" class="tab-content">
        <h1>Customers</h1>
        <div id="customers-root" class="grid-2">
          <section id="customers-list" class="card">
            <div class="card-head"><h2>All Customers</h2></div>
            <div class="card-body">
              <table id="customers-table" class="data-table">
                <thead>
                  <tr>
                    <th>Business</th>
                    <th>Contact</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th class="w-90">Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>

          <section id="customer-form-wrap" class="card">
            <div class="card-head"><h2>Add Customer</h2></div>
            <div class="card-body">
              <form id="customer-form" class="form-grid">
                <div class="form-row full">
                  <label>Business Name<span class="req">*</span>
                    <input name="business_name" required />
                  </label>
                </div>
                <div class="form-row">
                  <label>Contact Name
                    <input name="contact_name" />
                  </label>
                </div>
                <div class="form-row">
                  <label>Email<span class="req">*</span>
                    <input type="email" name="email" required />
                  </label>
                </div>
                <div class="form-row">
                  <label>Phone
                    <input name="phone" />
                  </label>
                </div>
                <div class="form-row">
                  <label>Mobile
                    <input name="mobile" />
                  </label>
                </div>

                <div class="form-row full"><h3 class="subhead">Invoice Address</h3></div>
                <div class="form-row full"><label>Line 1<input name="inv_line1" /></label></div>
                <div class="form-row full"><label>Line 2<input name="inv_line2" /></label></div>
                <div class="form-row"><label>City<input name="inv_city" /></label></div>
                <div class="form-row"><label>Region/State<input name="inv_region" /></label></div>
                <div class="form-row"><label>Postcode<input name="inv_postcode" /></label></div>
                <div class="form-row"><label>Country<input name="inv_country" /></label></div>

                <div class="form-row full"><h3 class="subhead">Shipping Address</h3></div>
                <div class="form-row full"><label>Line 1<input name="ship_line1" /></label></div>
                <div class="form-row full"><label>Line 2<input name="ship_line2" /></label></div>
                <div class="form-row"><label>City<input name="ship_city" /></label></div>
                <div class="form-row"><label>Region/State<input name="ship_region" /></label></div>
                <div class="form-row"><label>Postcode<input name="ship_postcode" /></label></div>
                <div class="form-row"><label>Country<input name="ship_country" /></label></div>

                <div class="form-row full">
                  <button class="btn primary" type="submit">Save Customer</button>
                </div>
              </form>
            </div>
          </section>

          <section id="customer-detail" class="card" style="display:none">
            <div class="card-head">
              <div>
                <h2 id="cd-name">Customer</h2>
                <div class="muted small">Contact: <span id="cd-contact"></span> · <span id="cd-email"></span> · <span id="cd-phone"></span></div>
              </div>
              <div class="card-actions">
                <button id="customer-back-btn" class="btn outline">Back to list</button>
              </div>
            </div>
            <div class="card-body">
              <div class="grid-2">
                <div><h3 class="subhead">Invoice Address</h3><p id="cd-invoice" class="address"></p></div>
                <div><h3 class="subhead">Shipping Address</h3><p id="cd-shipping" class="address"></p></div>
              </div>

              <h3 class="subhead mt">Previous Orders</h3>
              <table id="customer-orders-table" class="data-table">
                <thead>
                  <tr><th>Order</th><th>Status</th><th>Total</th><th>Created</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>
      </div>

      <div id="tab-stock" class="tab-content">
        <h1>Stock</h1>
        <p>Stock management content.</p>
      </div>

      <div id="tab-labels" class="tab-content">
        <h1>Labels</h1>
        <button id="loadBtn" onclick="loadBoard()">Update Board Info</button>
        <div id="board"></div>
      </div>

      <div id="tab-shipping" class="tab-content">
        <h1>Shipping</h1>
        <p>Shipping tools will be shown here.</p>
      </div>
    </main>
  </div>

  <!-- Hidden scanner input + pill -->
  <input id="scannerInput" type="text" autocomplete="off" inputmode="text"
         style="position:absolute;left:-9999px;width:1px;height:1px;opacity:0;" />
  <div id="scannerPill"
       style="position:fixed;right:12px;bottom:12px;background:#111;color:#fff;padding:6px 10px;border-radius:999px;font:12px/1 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;">
    Scanner: <span id="scannerPillText">ready</span>
  </div>
</body>
</html>
